<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>River Table Builder</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #1e1e1e;
      color: #f5f5f5;
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 30px;
      padding: 15px;
      background: #111;
      position: sticky;
      top: 0;
      z-index: 10;
    }
    nav a {
      color: #f5f5f5;
      text-decoration: none;
      font-weight: bold;
      transition: color 0.3s;
    }
    nav a:hover {
      color: #4fc3f7;
    }

    .builder-container {
      display: flex;
      padding: 20px;
      gap: 20px;
    }
    .controls {
      width: 250px;
      background: #2b2b2b;
      padding: 20px;
      border-radius: 12px;
    }
    .controls label {
      display: block;
      margin-top: 15px;
      font-size: 14px;
    }
    .controls input,
    .controls select {
      width: 100%;
      margin-top: 5px;
    }
    canvas {
      flex: 1;
      background: #333;
      border-radius: 12px;
    }
  </style>
</head>
<body>
  <nav>
    <a href="index.html">Home</a>
    <a href="builder.html">Builder</a>
    <a href="gallery.html">Gallery</a>
    <a href="about.html">About</a>
    <a href="contact.html">Contact</a>
  </nav>

  <div class="builder-container">
    <div class="controls">
      <h3>Customize Table</h3>
      <label>Wood Type:
        <select id="woodType">
          <option value="oak">Oak</option>
          <option value="walnut">Walnut</option>
          <option value="cherry">Cherry</option>
          <option value="maple">Maple</option>
        </select>
      </label>

      <label>Shape:
        <select id="shape">
          <option value="rectangle">Rectangle</option>
          <option value="square">Square</option>
          <option value="circle">Circle</option>
        </select>
      </label>

      <label>River Width:
        <input type="range" id="riverWidth" min="10" max="150" value="50">
      </label>

      <label>River Color:
        <input type="color" id="riverColor" value="#00aaff">
      </label>

      <label>Opacity:
        <input type="range" id="opacity" min="0" max="1" step="0.05" value="0.7">
      </label>

      <button id="randomize">Randomize River</button>
    </div>

    <canvas id="tableCanvas" width="600" height="600"></canvas>
  </div>

  <script>
    const canvas = document.getElementById("tableCanvas");
    const ctx = canvas.getContext("2d");

    const woodTextures = {
      oak: "/images/wood/oak.jpg",
      walnut: "/images/wood/walnut.jpg",
      cherry: "/images/wood/cherry.jpg",
      maple: "/images/wood/maple.jpg"
    };

    let woodType = "oak";
    let shape = "rectangle";
    let riverWidth = 50;
    let riverColor = "#00aaff";
    let opacity = 0.7;

    const woodImages = {};
    let riverPath = [];

    function generateRiverPath() {
      riverPath = [];
      const points = 12;
      const step = canvas.height / (points - 1);
      for (let i = 0; i < points; i++) {
        const x = canvas.width / 2 + (Math.random() - 0.5) * 80;
        const y = i * step;
        riverPath.push({ x, y });
      }
    }

    function drawTable() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Wood fill
      if (woodImages[woodType]?.complete) {
        const pattern = ctx.createPattern(woodImages[woodType], "repeat");
        ctx.fillStyle = pattern;
      } else {
        ctx.fillStyle = "#8b5a2b";
      }

      if (shape === "rectangle") {
        ctx.fillRect(50, 100, 500, 400);
      } else if (shape === "square") {
        ctx.fillRect(100, 100, 400, 400);
      } else if (shape === "circle") {
        ctx.beginPath();
        ctx.arc(300, 300, 250, 0, Math.PI * 2);
        ctx.closePath();
        ctx.fill();
      }

      // River overlay
      ctx.save();
      ctx.globalAlpha = opacity;
      ctx.fillStyle = riverColor;

      ctx.beginPath();
      for (let i = 0; i < riverPath.length; i++) {
        const { x, y } = riverPath[i];
        const offset = riverWidth / 2;

        if (i === 0) {
          ctx.moveTo(x - offset, y);
        } else {
          ctx.lineTo(x - offset, y);
        }
      }
      for (let i = riverPath.length - 1; i >= 0; i--) {
        const { x, y } = riverPath[i];
        const offset = riverWidth / 2;
        ctx.lineTo(x + offset, y);
      }
      ctx.closePath();
      ctx.fill();
      ctx.restore();
    }

    // Event listeners
    document.getElementById("woodType").addEventListener("change", e => {
      woodType = e.target.value;
      drawTable();
    });
    document.getElementById("shape").addEventListener("change", e => {
      shape = e.target.value;
      generateRiverPath();
      drawTable();
    });
    document.getElementById("riverWidth").addEventListener("input", e => {
      riverWidth = parseInt(e.target.value);
      drawTable();
    });
    document.getElementById("riverColor").addEventListener("input", e => {
      riverColor = e.target.value;
      drawTable();
    });
    document.getElementById("opacity").addEventListener("input", e => {
      opacity = parseFloat(e.target.value);
      drawTable();
    });
    document.getElementById("randomize").addEventListener("click", () => {
      generateRiverPath();
      drawTable();
    });

    // Preload wood textures
    for (const key in woodTextures) {
      const img = new Image();
      img.src = woodTextures[key];
      woodImages[key] = img;
    }

    generateRiverPath();
    drawTable();
  </script>
</body>
</html>
