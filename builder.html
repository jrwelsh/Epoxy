<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>River Table Builder - Jaxwel Woodworks</title>
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #f4f4f4;
    }
    main {
      width: 100%;
      max-width: 1200px;
      padding: 1rem;
    }
    .controls {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 1rem;
      margin: 1rem 0;
    }
    .control-group {
      background: white;
      padding: 1rem;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    canvas {
      background: #ddd;
      margin: 1rem auto;
      border-radius: 8px;
      display: block;
    }
  </style>
</head>
<body>
  <!-- Navigation -->
  <nav>
    <div class="nav-container">
      <a href="index.html" class="nav-logo">MySite</a>
      <ul class="nav-links" id="navLinks">
        <li><a href="index.html">Home</a></li>
        <li><a href="gallery.html">Gallery</a></li>
        <li><a href="shop.html">Shop</a></li>
        <li><a href="builder.html" class="active">Builder</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="contact.html">Contact</a></li>
      </ul>
      <div class="hamburger" id="hamburger">
        <span></span>
        <span></span>
        <span></span>
      </div>
    </div>
  </nav>

  <main>
    <h1>River Table Builder</h1>

    <div class="controls">
      <div class="control-group">
        <label>Shape:
          <select id="shapeSelect">
            <option value="rectangle">Rectangle</option>
            <option value="square">Square</option>
            <option value="circle">Circle</option>
          </select>
        </label>
      </div>
      <div class="control-group">
        <label>Wood Type:
          <select id="woodSelect">
            <option value="oak">Oak</option>
            <option value="walnut">Walnut</option>
            <option value="cherry">Cherry</option>
            <option value="maple">Maple</option>
          </select>
        </label>
      </div>
      <div class="control-group">
        <label>River Width:
          <input type="range" id="riverWidth" min="20" max="200" value="80">
        </label>
      </div>
      <div class="control-group">
        <label>Epoxy Color:
          <input type="color" id="epoxyColor" value="#1ca3ec">
        </label>
      </div>
      <div class="control-group">
        <label>Epoxy Opacity:
          <input type="range" id="epoxyOpacity" min="0" max="1" step="0.05" value="0.7">
        </label>
      </div>
    </div>

    <canvas id="builderCanvas" width="800" height="600"></canvas>
  </main>

  <footer>
    <p>&copy; 2025 Jaxwel Woodworks</p>
  </footer>

  <!-- Builder Script -->
  <script>
    const canvas = document.getElementById("builderCanvas");
    const ctx = canvas.getContext("2d");

    const shapeSelect = document.getElementById("shapeSelect");
    const woodSelect = document.getElementById("woodSelect");
    const riverWidthSlider = document.getElementById("riverWidth");
    const epoxyColorPicker = document.getElementById("epoxyColor");
    const epoxyOpacitySlider = document.getElementById("epoxyOpacity");

    const woodTextures = {
      oak: "images/wood/oak.jpg",
      walnut: "images/wood/walnut.jpg",
      cherry: "images/wood/cherry.jpg",
      maple: "images/wood/maple.jpg"
    };

    const woodImages = {};
    let loaded = 0;
    Object.entries(woodTextures).forEach(([key, src]) => {
      const img = new Image();
      img.src = src;
      img.onload = () => {
        woodImages[key] = img;
        loaded++;
        if (loaded === Object.keys(woodTextures).length) draw();
      };
    });

    function generateRiverPath(x, y, length, riverW) {
      const step = 30;
      let offsets = [];
      let offset = 0;
      for (let i = 0; i <= length; i += step) {
        offset += (Math.random() - 0.5) * 20;
        offset = Math.max(Math.min(offset, 40), -40);
        offsets.push(offset);
      }
      ctx.moveTo(x, y - riverW / 2 + offsets[0]);
      for (let i = 0; i < offsets.length; i++) {
        ctx.lineTo(x + i * step, y - riverW / 2 + offsets[i]);
      }
      for (let i = offsets.length - 1; i >= 0; i--) {
        ctx.lineTo(x + i * step, y + riverW / 2 + offsets[i]);
      }
      ctx.closePath();
    }

    function generateStraightRiverCut(cx, cy, width, riverW) {
      const step = 30;
      let offsets = [];
      let offset = 0;
      for (let i = 0; i <= width; i += step) {
        offset += (Math.random() - 0.5) * 20;
        offset = Math.max(Math.min(offset, 40), -40);
        offsets.push(offset);
      }
      ctx.moveTo(cx - width/2 - 10, cy - riverW / 2 + offsets[0]);
      for (let i = 0; i < offsets.length; i++) {
        ctx.lineTo(cx - width/2 + i * step, cy - riverW / 2 + offsets[i]);
      }
      ctx.lineTo(cx + width/2 + 10, cy - riverW / 2 + offsets[offsets.length - 1]);

      for (let i = offsets.length - 1; i >= 0; i--) {
        ctx.lineTo(cx - width/2 + i * step, cy + riverW / 2 + offsets[i]);
      }
      ctx.lineTo(cx - width/2 - 10, cy + riverW / 2 + offsets[0]);
      ctx.closePath();
    }

    function draw() {
      const shape = shapeSelect.value;
      const wood = woodSelect.value;
      const riverW = parseInt(riverWidthSlider.value);
      const epoxyColor = epoxyColorPicker.value;
      const epoxyOpacity = parseFloat(epoxyOpacitySlider.value);

      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Wood background
      if (woodImages[wood]) {
        const pattern = ctx.createPattern(woodImages[wood], "repeat");
        ctx.fillStyle = pattern;
      } else {
        ctx.fillStyle = "#8B5A2B";
      }

      // Draw shape
      ctx.beginPath();
      if (shape === "rectangle") {
        ctx.rect(100, 100, 600, 400);
      } else if (shape === "square") {
        ctx.rect(200, 100, 400, 400);
      } else if (shape === "circle") {
        ctx.arc(400, 300, 250, 0, Math.PI * 2);
      }
      ctx.fill();

      // Clip river inside shape
      ctx.save();
      ctx.beginPath();
      if (shape === "rectangle") {
        ctx.rect(100, 100, 600, 400);
      } else if (shape === "square") {
        ctx.rect(200, 100, 400, 400);
      } else if (shape === "circle") {
        ctx.arc(400, 300, 250, 0, Math.PI * 2);
      }
      ctx.clip();

      // River
      ctx.beginPath();
      if (shape === "rectangle") {
        generateRiverPath(100, 300, 600, riverW);
      } else if (shape === "square") {
        generateStraightRiverCut(400, 300, 400, riverW);
      } else if (shape === "circle") {
        generateStraightRiverCut(400, 300, 500, riverW);
      }
      ctx.fillStyle = hexToRgba(epoxyColor, epoxyOpacity);
      ctx.fill();

      ctx.restore();
    }

    function hexToRgba(hex, opacity) {
      const bigint = parseInt(hex.slice(1), 16);
      const r = (bigint >> 16) & 255;
      const g = (bigint >> 8) & 255;
      const b = bigint & 255;
      return `rgba(${r},${g},${b},${opacity})`;
    }

    shapeSelect.addEventListener("change", draw);
    woodSelect.addEventListener("change", draw);
    riverWidthSlider.addEventListener("input", draw);
    epoxyColorPicker.addEventListener("input", draw);
    epoxyOpacitySlider.addEventListener("input", draw);
  </script>

  <!-- Hamburger Menu Script -->
  <script>
    const hamburger = document.getElementById("hamburger");
    const navLinks = document.getElementById("navLinks");

    hamburger.addEventListener("click", () => {
      hamburger.classList.toggle("active");
      navLinks.classList.toggle("show");
    });
  </script>
</body>
</html>
